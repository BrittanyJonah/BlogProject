@model IEnumerable<PersonalBlog.Models.Post>
@inject PersonalBlog.Services.IImageService _imageService

@{
    ViewData["Title"] = "Home";
}

<!-- =======================
Main hero START -->
<section class="pt-4 pb-0 card-grid">
    <div class="container">
       
        <div class="row g-4">
            @if (ViewBag.Large is not null)
            {
                <!-- Left big card -->
                <div class="col-lg-6">
                    <div class="card card-overlay-bottom card-grid-lg card-bg-scale" style="background-image:url(@_imageService.DecodeImage(ViewBag.Large.ImageData, ViewBag.Large.ContentType)); background-position: center left; background-size: cover;">
                        <!-- Card featured -->
                        <span class="card-featured" title="Featured post"><i class="fas fa-star"></i></span>
                        <!-- Card Image overlay -->
                        <div class="card-img-overlay d-flex align-items-center p-3 p-sm-4">
                            <div class="w-100 mt-auto">
                                <!-- Card category -->
                                <a asp-controller="Blogs" asp-action="Details" asp-route-slug="@ViewBag.Large.Blog.Slug" class="badge bg-danger mb-2"><i class="fas fa-circle me-2 small fw-bold"></i>@ViewBag.Large.Blog.Name</a>
                                <!-- Card title -->
                                <h2 class="text-white h1"><a asp-controller="Posts" asp-action="Details" asp-route-blog="@ViewBag.Large.Blog.Slug" asp-route-slug="@ViewBag.Large.Slug" class="btn-link stretched-link text-reset">@ViewBag.Large.Title</a></h2>
                                <p class="text-white">@ViewBag.Large.Abstract </p>
                                <!-- Card info -->
                                <ul class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block">
                                    <li class="nav-item">
                                        <div class="nav-link">
                                            <div class="d-flex align-items-center text-white position-relative">
                                                <div class="avatar avatar-sm">
                                                    <img class="avatar-img rounded-circle" src="@_imageService.DecodeImage(ViewBag.Large.BlogUser.ImageData, ViewBag.Large.BlogUser.ContentType)" style="object-fit: cover;" alt="avatar">
                                                </div>
                                                <span class="ms-3">by <a asp-controller="Home" asp-action="About" class="stretched-link text-reset btn-link">Brittany</a></span>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="nav-item">@ViewBag.Large.Created.ToString("MMM dd, yyyy")</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            }

            <!-- Right small cards -->
            <div class="col-lg-6">
                <div class="row g-4">
                    @if (ViewBag.Top is not null)
                    {
                        <!-- Card item START -->
                        <div class="col-12">
                            <div class="card card-overlay-bottom card-grid-sm card-bg-scale" style="background-image:url(@_imageService.DecodeImage(ViewBag.Top.ImageData, ViewBag.Top.ContentType)); background-position: center left; background-size: cover;">
                                <!-- Card Image -->
                                <!-- Card Image overlay -->
                                <div class="card-img-overlay d-flex align-items-center p-3 p-sm-4">
                                    <div class="w-100 mt-auto">
                                        <!-- Card category -->
                                        <a asp-controller="Blogs" asp-action="Details" asp-route-slug="@ViewBag.Top.Blog.Slug" class="badge bg-warning mb-2"><i class="fas fa-circle me-2 small fw-bold"></i>@ViewBag.Top.Blog.Name</a>
                                        <!-- Card title -->
                                        <h4 class="text-white"><a asp-controller="Posts" asp-action="Details" asp-route-blog="@ViewBag.Top.Blog.Slug" asp-route-slug="@ViewBag.Top.Slug" class="btn-link stretched-link text-reset">@ViewBag.Top.Title</a></h4>
                                        <!-- Card info -->
                                        <ul class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block">
                                            <li class="nav-item position-relative">
                                                <div class="nav-link">
                                                    by <a asp-controller="Home" asp-action="About" class="stretched-link text-reset btn-link">Brittany</a>
                                                </div>
                                            </li>
                                            <li class="nav-item">@ViewBag.Top.Created.ToString("MMM dd, yyyy")</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Card item END -->
                    }

                    @if (ViewBag.BottomRight is not null)
                    {
                        <!-- Card item START -->
                        <div class="col-md-6">
                            <div class="card card-overlay-bottom card-grid-sm card-bg-scale" style="background-image:url(@_imageService.DecodeImage(ViewBag.BottomRight.ImageData, ViewBag.BottomRight.ContentType)); background-position: center left; background-size: cover;">
                                <!-- Card Image overlay -->
                                <div class="card-img-overlay d-flex align-items-center p-3 p-sm-4">
                                    <div class="w-100 mt-auto">
                                        <!-- Card category -->
                                        <a asp-controller="Blogs" asp-action="Details" asp-route-slug="@ViewBag.BottomRight.Blog.Slug" class="badge bg-success mb-2"><i class="fas fa-circle me-2 small fw-bold"></i>@ViewBag.BottomRight.Blog.Name</a>
                                        <!-- Card title -->
                                        <h4 class="text-white"><a asp-controller="Posts" asp-action="Details" asp-route-blog="@ViewBag.BottomRight.Blog.Slug" asp-route-slug="@ViewBag.BottomRight.Slug" class="btn-link stretched-link text-reset">@ViewBag.BottomRight.Title</a></h4>
                                        <!-- Card info -->
                                        <ul class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block">
                                            <li class="nav-item position-relative">
                                                <div class="nav-link">
                                                    by <a asp-controller="Home" asp-action="About" class="stretched-link text-reset btn-link">Brittany</a>
                                                </div>
                                            </li>
                                            <li class="nav-item">@ViewBag.BottomRight.Created.ToString("MMM dd, yyyy")</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Card item END -->
                    }

                    @if (ViewBag.BottomLeft is not null)
                    {
                        <!-- Card item START -->
                        <div class="col-md-6">
                            <div class="card card-overlay-bottom card-grid-sm card-bg-scale" style="background-image:url(@_imageService.DecodeImage(ViewBag.BottomLeft.ImageData, ViewBag.BottomLeft.ContentType)); background-position: center left; background-size: cover;">
                                <!-- Card Image overlay -->
                                <div class="card-img-overlay d-flex align-items-center p-3 p-sm-4">
                                    <div class="w-100 mt-auto">
                                        <!-- Card category -->
                                        <a asp-controller="Blogs" asp-action="Details" asp-route-slug="@ViewBag.BottomLeft.Blog.Slug" class="badge bg-info mb-2"><i class="fas fa-circle me-2 small fw-bold"></i>@ViewBag.BottomLeft.Blog.Name</a>
                                        <!-- Card title -->
                                        <h4 class="text-white"><a asp-controller="Posts" asp-action="Details" asp-route-blog="@ViewBag.BottomLeft.Blog.Slug" asp-route-slug="@ViewBag.BottomLeft.Slug" class="btn-link stretched-link text-reset">@ViewBag.BottomLeft.Title</a></h4>
                                        <!-- Card info -->
                                        <ul class="nav nav-divider text-white-force align-items-center d-none d-sm-inline-block">
                                            <li class="nav-item position-relative">
                                                <div class="nav-link">
                                                    by <a asp-controller="Home" asp-action="About" class="stretched-link text-reset btn-link">Brittany</a>
                                                </div>
                                            </li>
                                            <li class="nav-item">@ViewBag.BottomLeft.Created.ToString("MMM dd, yyyy")</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Card item END -->
                    }
                </div>
            </div>
        </div>
    </div>
</section>
<!-- =======================
Main hero END -->
<!-- =======================
Main content START -->
<section class="position-relative">
    <div class="container" data-sticky-container>
        <div class="row">
            <!-- Highlights START -->
            <div class="col-lg-9">

                <!-- Title -->
                <div class="mb-4">
                    <h2 class="m-0"><i class="bi bi-hourglass-top me-2"></i>Today's top highlights</h2>
                    <p>Most popular posts, pictures, videos, and more</p>
                </div>

                <div class="row gy-4">
                    @{int i = 0;}
                    @if (ViewBag.Highlights is not null)
                    {
                        @foreach (var post in ViewBag.Highlights)
                        {
                            i++;
                            <!-- Card item START -->
                            <div class="col-sm-6">
                                <div class="card">
                                    <!-- Card img -->
                                    <div class="position-relative">
                                        <img class="card-img" src="@_imageService.DecodeImage(post.ImageData, post.ContentType)" style="height: 350px; object-fit: cover;" alt="Card image">
                                        <div class="card-img-overlay d-flex align-items-start flex-column p-3">
                                            <!-- Card overlay bottom -->
                                            <div class="w-100 mt-auto">
                                                <!-- Card category -->
                                                <a asp-controller="Blogs" asp-action="Details" asp-route-slug="@post.Blog.Slug" class="badge bg-primary mb-2"><i class="fas fa-circle me-2 small fw-bold"></i>@post.Blog.Name</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-body px-0 pt-3">
                                        <h4 class="card-title"><a asp-controller="Posts" asp-action="Details" asp-route-blog="@post.Blog.Slug" asp-route-slug="@post.Slug" class="btn-link text-reset fw-bold">@post.Title</a></h4>
                                        <p class="card-text">@post.Abstract</p>
                                        <!-- Card info -->
                                        <ul class="nav nav-divider align-items-center d-none d-sm-inline-block">
                                            <li class="nav-item">
                                                <div class="nav-link">
                                                    <div class="d-flex align-items-center position-relative">
                                                        <div class="avatar avatar-xs">
                                                            <img class="avatar-img rounded-circle" src="@_imageService.DecodeImage(post.BlogUser.ImageData, post.BlogUser.ContentType)" style="object-fit: cover;" alt="avatar">
                                                        </div>
                                                        <span class="ms-3">by <a asp-area="" asp-controller="Home" asp-action="About" class="stretched-link text-reset btn-link">Brittany</a></span>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="nav-item">@post.Created.ToString("MMM dd, yyyy")</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <!-- Card item END -->

                            //get out of loop after 6 cards
                            if (i == 6)
                            {
                                break;
                            }
                        }
                    }

                    <!-- Load more START -->
                    @*<div class="col-12 text-center mt-5">
            <button type="button" class="btn btn-primary-soft">View more posts<i class="bi bi-arrow-down-circle ms-2 align-middle"></i></button>
        </div>*@
                    <!-- Load more END -->

                </div>
            </div>
            <!-- Highlights END -->
            <!-- Sidebar START -->
            <div class="col-lg-3 mt-5 mt-lg-0">
                <div data-sticky data-margin-top="80" data-sticky-for="767">

                    <!-- Social widget START -->
                    <div class="row g-2">
                        <div class="col-4">
                            <a href="https://twitch.tv/pandacodecamp" target="_blank" class="rounded text-center text-white-force p-3 d-block" style="background-color: #6441a5">
                                <i class="fab fa-twitch fs-5 mb-2"></i>
                                <h6 class="m-0">1.5K</h6>
                                <span class="small">Followers</span>
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="https://www.instagram.com/brittanyjonah_/" target="_blank" class="bg-instagram-gradient rounded text-center text-white-force p-3 d-block">
                                <i class="fab fa-instagram fs-5 mb-2"></i>
                                <h6 class="m-0">54</h6>
                                <span class="small">Followers</span>
                            </a>
                        </div>
                        <div class="col-4">
                            <a href="https://youtube.com/pandacodecamp" target="_blank" class="bg-youtube rounded text-center text-white-force p-3 d-block">
                                <i class="fab fa-youtube-square fs-5 mb-2"></i>
                                <h6 class="m-0">111</h6>
                                <span class="small">Subs</span>
                            </a>
                        </div>
                    </div>
                    <!-- Social widget END -->

                    <!-- Trending topics widget START -->
                    <div>
                        <h4 class="mt-4 mb-3">Trending</h4>
                        @{int catCount = 0;}
                        @foreach (var blog in ViewBag.Blogs)
                        {
                            catCount++;
                            <!-- Category item -->
                            <div class="text-center mb-3 card-bg-scale position-relative overflow-hidden rounded bg-dark-overlay-4 " style="background-image:url(@_imageService.DecodeImage(blog.ImageData, blog.ContentType)); background-position: center left; background-size: cover;">
                                <div class="p-3">
                                    <a asp-controller="Blogs" asp-action="Details" asp-route-slug="@blog.Slug" class="stretched-link btn-link fw-bold text-white h5">@blog.Name</a>
                                </div>
                            </div>
                            if (catCount == 5)
                            {
                                break;
                            }
                        }

                        <!-- View All Category button -->
                        <div class="text-center mt-3">
                            <a asp-area="" asp-controller="Blogs" asp-action="Index" class="fw-bold text-body text-primary-hover"><u>View all categories</u></a>
                        </div>
                    </div>
                    <!-- Trending topics widget END -->

                    <div class="row">
                        <!-- Recent post widget START -->
                        <div class="col-12 col-sm-6 col-lg-12">
                            <h4 class="mt-4 mb-3">Recent posts</h4>

                            @{int item = 0;}
                            @if (ViewBag.Newest is not null)
                            {
                                @foreach (var post in ViewBag.Newest)
                                {
                                    item++;
                                    <!-- Recent post item -->
                                    <div class="card mb-3">
                                        <div class="row g-3">
                                            <div class="col-4">
                                                <img class="rounded" src="@_imageService.DecodeImage(post.ImageData, post.ContentType)" style="height: 60px; width: 100px; object-fit: cover;" alt="Post Image">
                                            </div>
                                            <div class="col-8">
                                                <h6><a asp-controller="Posts" asp-action="Details" asp-route-blog="@post.Blog.Slug" asp-route-slug="@post.Slug" class="btn-link stretched-link text-reset fw-bold">@post.Title</a></h6>
                                                <div class="small mt-1">@post.Created.ToString("MMM dd, yyyy")</div>
                                            </div>
                                        </div>
                                    </div>
                                    //get out of loop after 6 cards
                                    if (item == 4)
                                    {
                                        break;
                                    }
                                }
                            }

                        </div>
                        <!-- Recent post widget END -->

                        <!-- ADV widget START -->
                        <!--<div class="col-12 col-sm-6 col-lg-12 my-4">
                            <a href="#" class="d-block card-img-flash">
                                <img src="images/adv.png" alt="">
                            </a>
                            <div class="smaller text-end mt-2">ads via <a href="#" class="text-body"><u>Bootstrap</u></a></div>
                        </div>-->
                        <!-- ADV widget END -->

                    </div>
                </div>
            </div>
            <!-- Sidebar END -->

        </div> <!-- Row end -->
    </div>
</section>
<!-- =======================
Main content END -->
<!-- Divider -->
<div class="container"><div class="border-bottom border-primary border-2 opacity-1"></div></div>


<!-- =======================
Sponsored Posts Section START -->
<section class="pt-4">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <!-- Title -->
                <div class="mb-4 d-md-flex justify-content-between align-items-center">
                    <h2 class="m-0"><i class="bi bi-megaphone"></i> Sponsored Posts</h2>
                    @*<a asp-area="" asp-controller="Home" asp-action="About" class="text-body small"><u>Content by: Brittany Jonah</u></a>*@
                </div>
                <div class="tiny-slider arrow-hover arrow-blur arrow-dark arrow-round">
                    <div class="tiny-slider-inner"
                         data-autoplay="true"
                         data-hoverpause="true"
                         data-gutter="24"
                         data-arrow="true"
                         data-dots="false"
                         data-items-xl="4"
                         data-items-md="3"
                         data-items-sm="2"
                         data-items-xs="1">
                        @if (ViewBag.Sponsored is not null)
                        {
                            @foreach (var post in ViewBag.Sponsored)
                            {
                                <!-- Card item START -->
                                <div class="card">
                                    <!-- Card img -->
                                    <div class="position-relative">
                                        <img class="card-img" src="@_imageService.DecodeImage(post.ImageData, post.ContentType)" style="height: 170px; width: 300px; object-fit: cover;" alt="Post image">
                                        <div class="card-img-overlay d-flex align-items-start flex-column p-3">
                                            <!-- Card overlay Top -->
                                            <div class="w-100 mb-auto d-flex justify-content-end">
                                                <div class="text-end ms-auto">
                                                    <!-- Card format icon -->
                                                    <!--<div class="icon-md bg-white-soft bg-blur text-white fw-bold rounded-circle" title="8.5 rating">8.5</div>-->
                                                </div>
                                            </div>
                                            <!-- Card overlay bottom -->
                                            <div class="w-100 mt-auto">
                                                <a asp-controller="Blogs" asp-action="Details" asp-route-slug="@post.Blog.Slug" class="badge bg-info mb-2"><i class="fas fa-circle me-2 small fw-bold"></i>@post.Blog.Name</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-body px-0 pt-3">
                                        <h5 class="card-title"><a asp-controller="Posts" asp-action="Details" asp-route-blog="@post.Blog.Slug" asp-route-slug="@post.Slug" class="btn-link text-reset fw-bold">@post.Title</a></h5>
                                        <!-- Card info -->
                                        <ul class="nav nav-divider align-items-center d-none d-sm-inline-block">
                                            <li class="nav-item">
                                                <div class="nav-link">
                                                    <div class="d-flex align-items-center position-relative">
                                                        <div class="avatar avatar-xs">
                                                            <img class="avatar-img rounded-circle" src="@_imageService.DecodeImage(post.BlogUser.ImageData, post.BlogUser.ContentType)" style="object-fit: cover;" alt="Author Avatar">
                                                        </div>
                                                        <span class="ms-3">by <a asp-controller="Home" asp-action="About" class="stretched-link text-reset btn-link">Brittany</a></span>
                                                    </div>
                                                </div>
                                            </li>
                                            <li class="nav-item">@post.Created.ToString("MMM dd, yyyy")</li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- Card item END -->
                            }
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- =======================
Section END -->

